<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="Chapter 5 Theory: Maths and Simulations | Just Enough To Be Dangerous" />
<meta property="og:type" content="book" />


<meta property="og:description" content="This book aims to give you just enough information so that you can start a research thesis in accounting and finance." />


<meta name="author" content="Stijn Masschelein" />

<meta name="date" content="2021-02-24" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  TeX: { equationNumbers: { autoNumber: "AMS" } }
});
</script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>

<meta name="description" content="This book aims to give you just enough information so that you can start a research thesis in accounting and finance.">

<title>Chapter 5 Theory: Maths and Simulations | Just Enough To Be Dangerous</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />
<script>
function toggle_visibility(id1, id2) {
var e = document.getElementById(id1);
var f = document.getElementById(id2);

e.style.display = ((e.style.display!='none') ? 'none' : 'block');

if(f.classList.contains('fa-plus-square')) {
    f.classList.add('fa-minus-square')
    f.classList.remove('fa-plus-square')
} else {
    f.classList.add('fa-plus-square')
    f.classList.remove('fa-minus-square')
}

}
</script>


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }

code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



</head>

<body>



<div class="row">
<div class="col-sm-12">
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title">Just Enough To Be Dangerous<p><p class="author">Stijn Masschelein</p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="index.html"><span class="toc-section-number">1</span> Preamble</a>
<a href="research-ceocomp.html"><span class="toc-section-number">2</span> A Research Project: CEO Compensation</a>
<a href="research-tools-theory.html"><span class="toc-section-number">3</span> Research Tools - Theory</a>
<a href="research-tools-data-analysis.html"><span class="toc-section-number">4</span> Research tools - Data Analysis</a>
<a id="active-page" href="maths-sim.html"><span class="toc-section-number">5</span> Theory: Maths and Simulations</a><ul class="toc-sections">
<li class="toc"><a href="#introduction-1"> Introduction</a></li>
<li class="toc"><a href="#NA"> New theory: CEO-firm matching.</a></li>
<li class="toc"><a href="#three-firms---three-ceos-model"> Three firms - three CEOs model</a></li>
<li class="toc"><a href="#n-firms---n-ceos-model"> N firms - N CEOs model</a></li>
<li class="toc"><a href="#simulation"> Simulation</a></li>
<li class="toc"><a href="#visualisations"> Visualisations</a></li>
<li class="toc"><a href="#functions-in-r"> Functions in <code>R</code></a></li>
<li class="toc"><a href="#why-should-you-simulate-data"> Why should you simulate data?</a></li>
</ul>
<a href="linear-regression.html"><span class="toc-section-number">6</span> Linear regression in <code>R</code></a>
<a href="measurement.html"><span class="toc-section-number">7</span> Measurement and Theory</a>
<a href="control-variables.html"><span class="toc-section-number">8</span> Control Variables</a>
<a href="assessment.html"><span class="toc-section-number">9</span> Assessment</a>
<a href="references.html"><span class="toc-section-number">10</span> References</a>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="row">
<div class="col-sm-12">
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html><body>
<div id="maths-sim" class="section level1">
<h1>
<span class="header-section-number">Chapter 5</span> Theory: Maths and Simulations</h1>
<div id="introduction-1" class="section level2">
<h2>
<span class="header-section-number">5.1</span> Introduction</h2>
<p>A good research project relies on strong theoretical foundation.
Theories are a summary of prior research findings and present
predictions you can test. In accounting and finance, a lot of
theories are mathematical theories. Sometimes, research articles
will give a good explanation of the arguments in a theory but
sometimes you will have to put in some extra effort to understand
the theory. In this section, I will give you two techniques that
can help to understand the theory better. The first is making the
theory simpler and less general and redo the derivations. The
second is to simulate data based on the theory and to visualise
the theory with plots. Computers are very good at doing
calculations. Whenever possible, you should let computers do the
work for you. Simulate and visualise is a technique, we will use
a lot more in the rest of the notes.</p>
</div>
<div id="new-theory-ceo-firm-matching." class="section level2">
<h2>
<span class="header-section-number">5.2</span> New theory: CEO-firm matching.</h2>
<p>Let us introduce a new theory how the size of the company is
related to the compensation of the CEO. In Chapter
<a href="research-ceocomp.html#research-ceocomp">2</a> I presented a basic model where talented
CEOs hire more people and attract more capital and thus grow the
company. This theory ignored that companies and CEOs can choose
to work with each other. In this section, we introduce a new
theory about matching firms and CEOs <span class="citation">(Edmans and Gabaix <a href="#ref-edmans2016executive">2016</a>; Tervio <a href="#ref-tervio_difference_2008">2008</a>)</span>.</p>
<p>The theory assumes that the increase in <span class="math inline">\(V\)</span>alue of a firm from
time <span class="math inline">\(0\)</span> to time <span class="math inline">\(1\)</span> is given by the following equation.</p>
<p><span class="math display" id="eq:matching-performance">\[\begin{equation}
\tag{5.1}
V_1(n) - V_0(n) = C V_0(n) T(m)
\end{equation}\]</span></p>
<p>The increase in value depends on the <span class="math inline">\(T\)</span>alent of the CEO, the
inital <span class="math inline">\(V\)</span>alue of the firm, and a scaling factor <span class="math inline">\(C\)</span>.<label for="tufte-sn-30" class="margin-toggle sidenote-number">30</label><input type="checkbox" id="tufte-sn-30" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">30</span> The scaling factor is not crucial to the theory. If performance
is measured in millions of dollars or in billions of dollars, the
scaling factor will differ but that is not telling us anything
about the economic mechanism.</span> <span class="math inline">\(n\)</span> is the rank of the size of the
firm and <span class="math inline">\(m\)</span> is the rank of the talent of the CEO. <span class="math inline">\(n = 1\)</span> is the
largest firm, <span class="math inline">\(m = 1\)</span> is the most talented CEO. The question the
theory is trying to answer which CEO, <span class="math inline">\(m\)</span>, is going to work for
firm, <span class="math inline">\(n\)</span>.</p>
<p>The theory assumes that firms will make a decision about which
CEO to hire and CEOs will only accept to work for a firm if they
cannot do better in another firm. The firms have to compensate
a manager with a <span class="math inline">\(w\)</span>age and will maximise the residual value of
the firm, <span class="math inline">\(V_1(n) - V_0(n) - w(m)\)</span>.
The model assumes that the managers will need a compensation above
<span class="math inline">\(w_0\)</span>.</p>
<p><span class="citation">Tervio (<a href="#ref-tervio_difference_2008">2008</a>)</span> and <span class="citation">Edmans and Gabaix (<a href="#ref-edmans2016executive">2016</a>)</span> show that when
<span class="math inline">\(m = n\)</span>, no firm or CEO can improve themselves by switching. This
means that the most talented CEO works for the largest firm,
the second most talented CEO works for the second largest firm,
until we reach the least talented CEO and the smallest firm. The
intuition is that CEOs have a larger impact in larger firms.<label for="tufte-sn-31" class="margin-toggle sidenote-number">31</label><input type="checkbox" id="tufte-sn-31" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">31</span> If a CEO is good at managing people, the impact of the CEO will be
better if they are managing more people.</span> Therefor, most value is
created when the largest firms are managed by the best CEOs. The
difficulty is to determine how much each firm should pay the CEO. I
first go over a simplified mathematical model that gets some of the
intuition across, then I explain how you can simulate from the
more complicated model</p>
</div>
<div id="three-firms---three-ceos-model" class="section level2">
<h2>
<span class="header-section-number">5.3</span> Three firms - three CEOs model</h2>
<p>Let us assume that there are only three CEOs and only three
firms. In equilibrium, we want to make sure that the largest firm
(<span class="math inline">\(n=1\)</span>) cannot do better than hiring the most talented CEO (<span class="math inline">\(m=1\)</span>). In
other words, the performance of the most talented CEO after paying
their compensation, should be higher than the residual performance of
the other two CEOs.</p>
<p><span class="math display" id="eq:matching-condition-1">\[\begin{equation}
\tag{5.2}
\begin{aligned}
CV_0(1) T(1) - w(1) \geq CV_0(1) T(2) - w(2) \\
CV_0(1) T(1) - w(1) \geq CV_0(1) T(3) - w(3) 
\end{aligned}
\end{equation}\]</span></p>
<p>Next, the second largest firm has to be better off hiring the
the second best CEO.</p>
<p><span class="math display" id="eq:matching-condition-2">\[\begin{equation}
\tag{5.3}
CV_0(2) T(2) - w(2) \geq CV_0(2) T(3) - w(3)
\end{equation}\]</span></p>
<p>If we add the first condition of <a href="maths-sim.html#eq:matching-condition-1">(5.2)</a>
to condition <a href="maths-sim.html#eq:matching-condition-2">(5.3)</a>. We can rewrite
everything and get the second condition of
<a href="maths-sim.html#eq:matching-condition-2">(5.3)</a>.</p>
<p><span class="math display">\[\begin{align*}
CV_0(1) T(1) - w(1) + CV_0(2) T(2) - {\color{blue}{w(2)}}
\geq CV_0(1) T(2) - {\color{blue}{w(2)}} + CV_0(2) T(3) - w(3)
\\
CV_0(1) T(1) - w(1) \geq C(V_0(1) - V_0(2))T(2) + C(V_0(2) - 
{\color{blue}{V_0(1)}})T(3) + {\color{blue}{CV_0(1)T(3)}}- w(3)
\\
CV_0(1) T(1) - w(1) \geq 
{\color{blue} {C(V_0(1) - V_0(2))(T(2) - T(3))}} + CV_0(1)T(3) - w(3)
\end{align*}\]</span></p>
<p>Because <span class="math inline">\(V_0(1) &gt; V_0(2)\)</span> and <span class="math inline">\(T_0(2) &gt; T_0(3)\)</span>, we can delete
the first term on the right hand side. So, the two inequalities
give us the third inequality from the previous slide for free.</p>
<p>Because firms will prefer to paying a lower compensation than
more compensation, firms pay their CEO just enough so that
smaller firms are not willing to pay the same amount of money to
poach the CEO away. For each firm, we have to make sure that
the advantage of having a more talented CEO is smaller than the
extra wage of hiring the CEO.</p>
<p><span class="math display">\[\begin{align*}
CV_0(2) (T(1) - T(2)) \geq w(1) - w(2) \\
CV_0(3) (T(2) - T(3)) \geq w(2) - w(3)
\end{align*}\]</span></p>
<p>Because firm <span class="math inline">\(n=1\)</span> and <span class="math inline">\(2\)</span> will set the wage just high enough to
make sure that a smaller firm does not poach their CEO, they will
set the compensation <span class="math inline">\(w(1)\)</span> and <span class="math inline">\(w(2)\)</span> just high enough but not
higher. We can simplify the resulting conditions than to
equalities.</p>
<p><span class="math display" id="eq:matching-equality">\[\begin{equation}
\tag{5.4}
\begin{aligned}
CV_0(2) (T(1) - T(2)) + w(2) = w(1) \\
CV_0(3) (T(2) - T(3)) + w(3) = w(2) 
\end{aligned}
\end{equation}\]</span></p>
<p>The deriviations are a bit tedious and I do not necessarily want
you to be able to do this entirely on your own. However, it shows
that with some small calculations and with some economic
intuition about what we want to calculate, we can again derive
the relation between firm value and CEO compensation.</p>
</div>
<div id="n-firms---n-ceos-model" class="section level2">
<h2>
<span class="header-section-number">5.4</span> N firms - N CEOs model</h2>
<p>If the literature points you to a mathematical model and you want
to understand it better. Breaking it down to a simpler model with
only 2 or 3 firms can be very illuminating. I hope the three firm
model helped you to get some of the intuition behind the model
without resorting to too complicated maths. It is relatively easy
to see that we can write the inequalities in
<a href="maths-sim.html#eq:matching-equality">(5.4)</a> in a more general form.</p>
<p><span class="math display" id="eq:matching-equality-general">\[\begin{equation}
\tag{5.5}
\begin{aligned}
CV_0(n + 1) (T(n) - T(n+1)) + w(n + 1) = w(n) \\
\forall n = 1,.., N-1
\end{aligned}
\end{equation}\]</span></p>
<p>The basic idea is that a larger firm will pay more for a CEO than
a smaller firm. If the larger firm wants to make sure that a the
more talented CEO works for them, they need to pay the CEO a high
enough wage. The difference between the two wages for a talented
CEO will be the surplus that the CEO would create in the smaller
firm. So the smaller firm will not be willing to poach the more
talented CEO because the costs (higher wage) would outweight the
benefit (higher surplus).</p>
<p>The original papers go further with the derivations
<span class="citation">(Edmans and Gabaix <a href="#ref-edmans2016executive">2016</a>; Tervio <a href="#ref-tervio_difference_2008">2008</a>)</span>. However,
this is an algorithm we can give to <code>R</code> when we add some further
assumptions. So instead of going over all the math, we are going
to simulate wages and firm values based on the algorithm.</p>
<p>The original theoretical papers also need the extra
assumptions. The goal of the simulation is to show that
sometimes you do not need all the fancy maths when you can write a
computer program to do the work for you. We will use similar
assumptions as the original papers but implement them in an <code>R</code>
program.</p>
</div>
<div id="simulation" class="section level2">
<h2>
<span class="header-section-number">5.5</span> Simulation</h2>
<p>First, let us load the <code>tidyverse</code> package.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a></code></pre></div>
<p>Next, we simulate data for <code>obs=500</code> observations. <code>size_rate</code>
is a parameter that controls the size of firms. A value of 1
means that firms have constant returns to size, the same
assumption as in Chapter <a href="research-ceocomp.html#research-ceocomp">2</a>. <code>talent_rate</code>
is something similar for the Talent of the CEOs. A larger number
for both rate parameters implies that differences between sizes
or CEOs become larger at the top. <code>C</code> is the <span class="math inline">\(C\)</span> constant in the
model. <code>scale</code> is an additional parameter that helps me scale the
size of the firms so that I get similar numbers as the real data.<label for="tufte-sn-32" class="margin-toggle sidenote-number">32</label><input type="checkbox" id="tufte-sn-32" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">32</span> This is not necessarily a fudge. The theory does not say
anything about whether we should measure firm size in USD, in AUD
or in CNY. So the scale we use is arbitrary.</span> <code>w0</code> is the base
wage for the least talented CEO.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1">obs &lt;-<span class="st"> </span><span class="dv">500</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">size_rate &lt;-<span class="st"> </span><span class="dv">1</span>; talent_rate &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">/</span><span class="dv">3</span>; </a>
<a class="sourceLine" id="cb30-3" data-line-number="3">C &lt;-<span class="st"> </span><span class="dv">10</span>; scale &lt;-<span class="st"> </span><span class="dv">600</span>; w0 &lt;-<span class="st"> </span><span class="dv">0</span>; </a>
<a class="sourceLine" id="cb30-4" data-line-number="4">n &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span>obs)</a>
<a class="sourceLine" id="cb30-5" data-line-number="5">size &lt;-<span class="st"> </span>scale <span class="op">*</span><span class="st"> </span>n <span class="op">^</span><span class="st"> </span>(<span class="op">-</span>size_rate)</a>
<a class="sourceLine" id="cb30-6" data-line-number="6">talent &lt;-<span class="st"> </span><span class="op">-</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>talent_rate <span class="op">*</span><span class="st"> </span>n <span class="op">^</span><span class="st"> </span>(talent_rate)</a></code></pre></div>
<p><code>n</code> is an <code>R</code> vector of length <code>obs</code> (i.e. 500) with values from
1 to <code>obs</code>. So it is the rank in size and talent for each firm
and CEO. You can see what <code>n</code> look like by just typing <code>n</code> and
enter in the R console.</p>
<p>Size and talent follow an exponential distribution which has some
theoretical motivation given in <span class="citation">Tervio (<a href="#ref-tervio_difference_2008">2008</a>)</span> and
<span class="citation">Edmans and Gabaix (<a href="#ref-edmans2016executive">2016</a>)</span>. If that interests you, please go have a
look but it goes beyond what we need today. What we do is give a
value for the size of each firm from 1 to 500 and for the talent
of each CEO from 1 to 500.</p>
<p>We can also calculate the wage of each CEO-firm combination from
equation <a href="maths-sim.html#eq:matching-equality-general">(5.5)</a>. We start by creating
a wage vector with 500 <code>NA</code> values.<label for="tufte-sn-33" class="margin-toggle sidenote-number">33</label><input type="checkbox" id="tufte-sn-33" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">33</span> The <code>rep</code> function creates a vector of <code>obs</code> <em>rep</em>ititions of
<code>NA</code></span>
At the last (<code>obs = 500</code>) position of the vector, we set the wage
equal to <code>w0</code> for the least talented CEO and the smallest firm.
Than <em>for</em> each firm (we go from <code>i = 499</code> to <code>i = 1</code>), we set the
wage as the wage of the smaller firm (<code>i + 1</code>) and subtract the
surplus our CEO would generate in the smaller firm over what
their CEO is now generating.<label for="tufte-sn-34" class="margin-toggle sidenote-number">34</label><input type="checkbox" id="tufte-sn-34" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">34</span> Again <code>scale</code> and <code>C</code> just scale
some of the values so that they are easier to interpret. These
parameters are less important for the economic intuition.</span></p>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb31-1" data-line-number="1">wage &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, obs)</a>
<a class="sourceLine" id="cb31-2" data-line-number="2">wage[obs] &lt;-<span class="st"> </span>w0</a>
<a class="sourceLine" id="cb31-3" data-line-number="3"><span class="cf">for</span> (i <span class="cf">in</span> (obs <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb31-4" data-line-number="4">  wage[i] &lt;-<span class="st"> </span>wage[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>scale <span class="op">*</span><span class="st"> </span>C <span class="op">*</span><span class="st"> </span>size[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>] <span class="op">*</span><span class="st"> </span></a>
<a class="sourceLine" id="cb31-5" data-line-number="5"><span class="st">    </span>(talent[i] <span class="op">-</span><span class="st"> </span>talent[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb31-6" data-line-number="6">}</a></code></pre></div>
<p>Now we can put all our variables in a dataset. The <code>tidyverse</code>
calls datasets <code>tibbles</code> and they are the main object that
<code>tidyverse</code> functions work on.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" data-line-number="1">simulated_data &lt;-<span class="st"> </span><span class="kw">tibble</span>(</a>
<a class="sourceLine" id="cb32-2" data-line-number="2">  <span class="dt">n =</span> n,</a>
<a class="sourceLine" id="cb32-3" data-line-number="3">  <span class="dt">size =</span> size,</a>
<a class="sourceLine" id="cb32-4" data-line-number="4">  <span class="dt">talent =</span> talent,</a>
<a class="sourceLine" id="cb32-5" data-line-number="5">  <span class="dt">wage =</span> wage</a>
<a class="sourceLine" id="cb32-6" data-line-number="6">) </a></code></pre></div>
</div>
<div id="visualisations" class="section level2">
<h2>
<span class="header-section-number">5.6</span> Visualisations</h2>
<p>With the data we simulated, we can visualise the theory and
see whether our theory matches our intuition. Visulising a theory
is one way to understand the assumptions and to check whether
it matches the data. Even if you do not have your data yet, it
will give you an idea of what the data should look like.</p>
<p>Figure <a href="maths-sim.html#fig:wage-size">5.1</a> shows the relation between the
simulated CEO wage and simulated firm size. It’s not
perfect but the plot does follow a similar non-linear pattern as
what we found in Chapter <a href="research-ceocomp.html#research-ceocomp">2</a> (see Figure
<a href="maths-sim.html#fig:wage-size-data">5.2</a>).<label for="tufte-sn-35" class="margin-toggle sidenote-number">35</label><input type="checkbox" id="tufte-sn-35" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">35</span> <code>qplot</code> is a funtion to make <em>q</em>uick plots and it is part of the
<code>ggplot</code> package which is part of the <code>tidyverse</code>.</span></p>

<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:wage-size"></span>
<img src="method_accfin_files/figure-html/wage-size-1.png" alt="Relation between simulated CEO wage and firm size." width="672"><!--
<p class="caption marginnote">-->Figure 5.1: Relation between simulated CEO wage and firm size.<!--</p>-->
<!--</div>--></span>
</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb33-1" data-line-number="1"><span class="kw">qplot</span>(<span class="dt">data =</span> simulated_data, <span class="dt">y =</span> wage, <span class="dt">x =</span> size)</a></code></pre></div>
<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:wage-size-data"></span>
<img src="method_accfin_files/figure-html/wage-size-data-1.png" alt="(ref:us-comp-value-plot)" width="672"><!--
<p class="caption marginnote">-->Figure 5.2: (ref:us-comp-value-plot)<!--</p>-->
<!--</div>--></span>
</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" data-line-number="1"><span class="kw">print</span>(plot_comp_value)</a></code></pre></div>
<p>To better understand the assumptions in the theory, we can also
plot how talent and size change as a function of the rank of
respectively the CEO and the firm. I glossed over the details
before but that does not mean that we cannot check whether those
functions make sense.</p>
<p>Figure <a href="maths-sim.html#fig:assumptions">5.3</a> shows us which assumptions were
necessary for the theory to work. We see that the difference in
talent at the top of the distribution (<code>n = 1</code>) is not that
large, the difference in firm sizes is much more pronounced and
is driving the difference in wages according to this theory.</p>

<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:assumptions"></span>
<img src="method_accfin_files/figure-html/assumptions-1.png" alt="Relation between talent and rank of CEO (A) and between size and rank of the firm (B)." width="288"><!--
<p class="caption marginnote">-->Figure 5.3: Relation between talent and rank of CEO (A) and between size and rank of the firm (B).<!--</p>-->
<!--</div>--></span>
</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb35-1" data-line-number="1">p_talent &lt;-<span class="st"> </span><span class="kw">qplot</span>(<span class="dt">data =</span> simulated_data, <span class="dt">y =</span> talent, <span class="dt">x =</span> n)</a>
<a class="sourceLine" id="cb35-2" data-line-number="2">p_size &lt;-<span class="st"> </span><span class="kw">qplot</span>(<span class="dt">data =</span> simulated_data, <span class="dt">y =</span> size, <span class="dt">x =</span> n) </a>
<a class="sourceLine" id="cb35-3" data-line-number="3">cowplot<span class="op">::</span><span class="kw">plot_grid</span>(p_talent, p_size, <span class="dt">ncol =</span> <span class="dv">1</span>, <span class="dt">labels =</span> <span class="st">"AUTO"</span>)</a></code></pre></div>
<p>In the code, I use a function from the <code>cowplot</code> package to plot
different plots (<code>p_talent</code> and <code>p_size</code>) in 1 column. The
automatic labels will add the A and B labels for the plots.</p>
</div>
<div id="functions-in-r" class="section level2">
<h2>
<span class="header-section-number">5.7</span> Functions in <code>R</code>
</h2>
<p>One of the most valuable aspects of <code>R</code> is that you can write
new functions. Functions allow you to create your own verbs to
apply to objects. In the previous section, we simulated data with
a number of parameters in the theory set at a fixed value. If we
want to compare the sensitivity of the theory to changes in the
parameters, we want to simulate new datasets with different
parameter values. A function to simulate data is what we need.</p>
<p>Functions are created with the <code>function</code> function. In between
brackets, you define the parameter you want to use in your
functions and their default values. In between the curly braces
<code>{}</code> you tell <code>R</code> what it should do with those parameters.
Ideally, you should not rely on any parameter or data that is not
defined in your function. <code>R</code> has some liberal defaults which
might give you unexpected results if you do that. You can rely on
external functions like I do to create the <code>tibble</code>.</p>
<p>I do nothing in the function that I have not done before. The
only addition is that at the end, the function <code>return</code>s the
simulated data. You can then use the function to create a new
simulated dataset.<label for="tufte-sn-36" class="margin-toggle sidenote-number">36</label><input type="checkbox" id="tufte-sn-36" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">36</span> I call the function <code>create_fake_data</code> because I want to
emphasise that there is nothing special about simulated data.
Some people prefer more dignified names. If you prefer that, you
can use any other name for the function. Just make sure that it
is clear what your function is doing.</span></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" data-line-number="1">create_fake_data &lt;-<span class="st"> </span><span class="cf">function</span>(<span class="dt">obs =</span> <span class="dv">500</span>, <span class="dt">size_rate =</span> <span class="dv">1</span>, </a>
<a class="sourceLine" id="cb36-2" data-line-number="2">                             <span class="dt">talent_rate =</span> <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb36-3" data-line-number="3">                             <span class="dt">w0 =</span> <span class="fl">.001</span>, <span class="dt">C =</span> <span class="dv">1</span>){</a>
<a class="sourceLine" id="cb36-4" data-line-number="4">  scale =<span class="st"> </span><span class="dv">600</span></a>
<a class="sourceLine" id="cb36-5" data-line-number="5">  n =<span class="st"> </span><span class="dv">1</span><span class="op">:</span>obs</a>
<a class="sourceLine" id="cb36-6" data-line-number="6">  size =<span class="st"> </span>scale <span class="op">*</span><span class="st"> </span>n <span class="op">^</span><span class="st"> </span>(<span class="op">-</span>size_rate) </a>
<a class="sourceLine" id="cb36-7" data-line-number="7">  talent =<span class="st">  </span><span class="dv">-1</span><span class="op">/</span>talent_rate <span class="op">*</span><span class="st"> </span>n <span class="op">^</span><span class="st"> </span>talent_rate</a>
<a class="sourceLine" id="cb36-8" data-line-number="8">  wage =<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, obs)</a>
<a class="sourceLine" id="cb36-9" data-line-number="9">  wage[obs] =<span class="st"> </span>w0 </a>
<a class="sourceLine" id="cb36-10" data-line-number="10">  <span class="cf">for</span> (i <span class="cf">in</span> (obs <span class="op">-</span><span class="st"> </span><span class="dv">1</span>)<span class="op">:</span><span class="dv">1</span>){</a>
<a class="sourceLine" id="cb36-11" data-line-number="11">    wage[i] =<span class="st">  </span>wage[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>] <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>scale <span class="op">*</span><span class="st"> </span>C <span class="op">*</span><span class="st"> </span>size[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>] <span class="op">*</span><span class="st"> </span></a>
<a class="sourceLine" id="cb36-12" data-line-number="12"><span class="st">      </span>(talent[i] <span class="op">-</span><span class="st"> </span>talent[i <span class="op">+</span><span class="st"> </span><span class="dv">1</span>])</a>
<a class="sourceLine" id="cb36-13" data-line-number="13">  }</a>
<a class="sourceLine" id="cb36-14" data-line-number="14">  fake_data =<span class="st"> </span>dplyr<span class="op">::</span><span class="kw">tibble</span>(<span class="dt">n =</span> n, <span class="dt">size =</span> size, <span class="dt">talent =</span> talent, </a>
<a class="sourceLine" id="cb36-15" data-line-number="15">                            <span class="dt">wage =</span> wage)</a>
<a class="sourceLine" id="cb36-16" data-line-number="16">  <span class="kw">return</span>(fake_data)</a>
<a class="sourceLine" id="cb36-17" data-line-number="17">}</a>
<a class="sourceLine" id="cb36-18" data-line-number="18">fake_data &lt;-<span class="st"> </span><span class="kw">create_fake_data</span>(<span class="dt">talent_rate =</span> <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>, <span class="dt">C =</span> <span class="fl">0.01</span>)</a></code></pre></div>
<p>We can create new datasets where the talent_rate is increased to
1 (high talent) and the effect of CEOs on the surplus is
increased to .015 instead of .10. I choose .10 in this simulation
instead of 10 so that all values can be interpreted in billion
USD to mimic the real data. Again, that is a rather arbitrary
scaling issue.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" data-line-number="1">data1 &lt;-<span class="st"> </span><span class="kw">create_fake_data</span>(<span class="dt">obs =</span> <span class="dv">500</span>, <span class="dt">talent_rate =</span> <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>, <span class="dt">C =</span> <span class="fl">.01</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">talent_rate =</span> <span class="st">"low talent"</span>, <span class="dt">C =</span> <span class="st">"low effect"</span>)</a>
<a class="sourceLine" id="cb37-3" data-line-number="3">data2 &lt;-<span class="st"> </span><span class="kw">create_fake_data</span>(<span class="dt">obs =</span> <span class="dv">500</span>, <span class="dt">talent_rate =</span> <span class="dv">1</span>, <span class="dt">C =</span> <span class="fl">.01</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-4" data-line-number="4"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">talent_rate =</span> <span class="st">"high talent"</span>, <span class="dt">C =</span> <span class="st">"low effect"</span>)</a>
<a class="sourceLine" id="cb37-5" data-line-number="5">data3 &lt;-<span class="st"> </span><span class="kw">create_fake_data</span>(<span class="dt">obs =</span> <span class="dv">500</span>, <span class="dt">talent_rate =</span> <span class="dv">2</span><span class="op">/</span><span class="dv">3</span>, <span class="dt">C =</span> <span class="fl">.015</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-6" data-line-number="6"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">talent_rate =</span> <span class="st">"low talent"</span>, <span class="dt">C =</span> <span class="st">"high effect"</span>)</a>
<a class="sourceLine" id="cb37-7" data-line-number="7">data4 &lt;-<span class="st"> </span><span class="kw">create_fake_data</span>(<span class="dt">obs =</span> <span class="dv">500</span>, <span class="dt">talent_rate =</span> <span class="dv">1</span>, <span class="dt">C =</span> <span class="fl">.015</span>) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb37-8" data-line-number="8"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">talent_rate =</span> <span class="st">"high talent"</span>, <span class="dt">C =</span> <span class="st">"high effect"</span>)</a>
<a class="sourceLine" id="cb37-9" data-line-number="9">data_exp &lt;-<span class="st"> </span><span class="kw">bind_rows</span>(data1, data2, data3, data4)</a>
<a class="sourceLine" id="cb37-10" data-line-number="10">data_exp</a></code></pre></div>
<pre><code>## # A tibble: 2,000 x 6
##        n  size talent   wage talent_rate C         
##    &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt;     
##  1     1 600    -1.5  0.0241 low talent  low effect
##  2     2 300    -2.38 0.0197 low talent  low effect
##  3     3 200    -3.12 0.0172 low talent  low effect
##  4     4 150    -3.78 0.0156 low talent  low effect
##  5     5 120    -4.39 0.0143 low talent  low effect
##  6     6 100    -4.95 0.0134 low talent  low effect
##  7     7  85.7  -5.49 0.0126 low talent  low effect
##  8     8  75    -6.00 0.0120 low talent  low effect
##  9     9  66.7  -6.49 0.0114 low talent  low effect
## 10    10  60    -6.96 0.0110 low talent  low effect
## # … with 1,990 more rows</code></pre>
<p>The <code>bind_rows</code> function allows you to combine the four datasets
in one big dataset <code>data_exp</code>. This will help us to plot the data
in Figure <a href="maths-sim.html#fig:sim-combined">5.4</a> with the more complicated but
also more flexible <code>ggplot</code> function. In the function, we first
define the data we want to use. Within the <code>aes()</code> specification,
we define the variables that are going to be plotted. We tell
ggplot that we want the data to be plotted as the following
<em>geom</em>etric elements a point and a line.<label for="tufte-sn-37" class="margin-toggle sidenote-number">37</label><input type="checkbox" id="tufte-sn-37" class="margin-toggle"><span class="sidenote"><span class="sidenote-number">37</span> Obviously, you do not
need both. This is just to show you what you can do.</span> I make the line
colour grey. The <code>facet_grid</code> creates different subplots depending on
whether an observation has a different value for the <code>talent_rate</code>
variable and the <code>C</code> variable.</p>

<p>
<span class="marginnote shownote">
<!--
<div class="figure">--><span id="fig:sim-combined"></span>
<img src="method_accfin_files/figure-html/sim-combined-1.png" alt="(ref:sim-combined)" width="384"><!--
<p class="caption marginnote">-->Figure 5.4: (ref:sim-combined)<!--</p>-->
<!--</div>--></span>
</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" data-line-number="1">plot_exp &lt;-<span class="st"> </span><span class="kw">ggplot</span>(data_exp, <span class="kw">aes</span>(<span class="dt">x =</span> size, <span class="dt">y =</span> wage)) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-2" data-line-number="2"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb39-3" data-line-number="3"><span class="st">  </span><span class="kw">geom_line</span>(<span class="dt">colour =</span> <span class="st">"gray"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb39-4" data-line-number="4"><span class="st">  </span><span class="kw">facet_grid</span>(talent_rate <span class="op">~</span><span class="st"> </span>C)</a>
<a class="sourceLine" id="cb39-5" data-line-number="5"><span class="kw">print</span>(plot_exp)</a></code></pre></div>
<p>It looks like our theory is much more sensitive to changes in
the talent rate than in changes to the scaling effect.</p>
</div>
<div id="why-should-you-simulate-data" class="section level2">
<h2>
<span class="header-section-number">5.8</span> Why should you simulate data?</h2>
<p>In these notes, I will come back to the idea of simulation
over and over. For three big reasons:</p>
<ol style="list-style-type: decimal">
<li><p>Simulating data from a theory and visualising the theory helps
you sharpen your intuition for your theory and for which values
are reasonable and which ones are not. If you know upfront which
values are not reasonable that will help you to interpret your
findings in your statistical analysis. If you estimate parameters
in your model that are too big or too small, it might be an
indication that something went wrong with your analysis.</p></li>
<li><p>When you simulate data you can simulate variables that you
cannot observe (e.g. CEO talent). Sometimes these variables need
to be included in your statistical analysis to get unbiased
parameter estimates. With simulated datasets, you can run the
analysis with and without the unobservable variables to
investigate the impact of including and excluding the variable.</p></li>
<li><p>If there are different statistical tests you can use to
investigate your research question, you do not want to test the
different tests on your real data. If you pick the statistical
test that gives you the “right” answer, you are likely to delude
yourself. The right way to compare different statistical tests is
to see whether they can estimate parameters in simulated data
where you know what the right value of the parameter is.</p></li>
</ol>
<p>In short, the advantage of being able to generete simulated data
is that it sharpens your understanding of your theory and of
your statistical test.</p>

</div>
</div>
<h3> References</h3>
<div id="refs" class="references">
<div id="ref-edmans2016executive">
<p>Edmans, Alex, and Xavier Gabaix. 2016. “Executive Compensation: A Modern Primer.” <em>Journal of Economic Literature</em> 54 (4): 1232–87.</p>
</div>
<div id="ref-tervio_difference_2008">
<p>Tervio, Marko. 2008. “The Difference That CEOs Make: An Assignment Model Approach.” <em>American Economic Review</em> 98 (3): 642–68. <a href="https://doi.org/10.1257/aer.98.3.642">https://doi.org/10.1257/aer.98.3.642</a>.</p>
</div>
</div>
</body></html>

<p style="text-align: center;">
<a href="research-tools-data-analysis.html"><button class="btn btn-default">Previous</button></a>
<a href="linear-regression.html"><button class="btn btn-default">Next</button></a>
</p>
<p class="build-date">Page built: 
2021-02-24
</p>
</div>
</div>



</body>
</html>
